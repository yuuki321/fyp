{% extends "base.html" %}

{% block content %}
<div class="container">
    <h1>{{ _('Previous Works') }}</h1>
    
    <div class="projects-grid">
        {% for project in projects %}
        <div class="project-card">
            <h3>{{ project.title }}</h3>
            <p class="project-date">{{ project.created_at.strftime('%Y-%m-%d %H:%M') }}</p>
            <div class="project-details">
                <p><strong>{{ _('Duration') }}:</strong> {{ project.duration }}s</p>
                <p><strong>{{ _('Chord Progression') }}:</strong> {{ project.chord_progression }}</p>
            </div>
            <div class="project-actions">
                <button class="btn btn-primary" onclick="playProject({{ project.id }})">
                    {{ _('Play') }}
                </button>
                <button class="btn btn-danger" onclick="deleteProject({{ project.id }})">
                    {{ _('Delete') }}
                </button>
            </div>
        </div>
        {% endfor %}
    </div>
</div>

<style>
.projects-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
    gap: 20px;
    padding: 20px 0;
}

.project-card {
    border: 1px solid #ddd;
    border-radius: 8px;
    padding: 15px;
    background: #fff;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}

.project-date {
    color: #666;
    font-size: 0.9em;
}

.project-details {
    margin: 10px 0;
}

.project-actions {
    display: flex;
    gap: 10px;
    margin-top: 15px;
}
</style>

<script>
function playProject(projectId) {
    // 播放項目的邏輯
    fetch(`/project/${projectId}`)
        .then(response => response.json())
        .then(data => {
            // 處理播放邏輯
            console.log('Playing project:', data);
        });
}

function deleteProject(projectId) {
    if (confirm("{{ _('Are you sure you want to delete this project?') }}")) {
        fetch(`/project/${projectId}`, {
            method: 'DELETE',
        })
        .then(response => response.json())
        .then(data => {
            if (data.status === 'success') {
                location.reload();
            }
        });
    }
}
</script>
{% endblock %} 